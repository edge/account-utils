/// <reference types="stripe/types/crypto/crypto" />
/// <reference types="stripe/types/shared" />
/// <reference types="stripe/types/Errors" />
/// <reference types="stripe/types/OAuth" />
/// <reference types="stripe/types/Webhooks" />
/// <reference types="stripe/types/2020-08-27/AccountLinks" />
/// <reference types="stripe/types/2020-08-27/Accounts" />
/// <reference types="stripe/types/2020-08-27/AlipayAccounts" />
/// <reference types="stripe/types/2020-08-27/ApplePayDomains" />
/// <reference types="stripe/types/2020-08-27/ApplicationFees" />
/// <reference types="stripe/types/2020-08-27/Applications" />
/// <reference types="stripe/types/2020-08-27/Apps/Secrets" />
/// <reference types="stripe/types/2020-08-27/Balance" />
/// <reference types="stripe/types/2020-08-27/BalanceTransactions" />
/// <reference types="stripe/types/2020-08-27/BankAccounts" />
/// <reference types="stripe/types/2020-08-27/BillingPortal/Configurations" />
/// <reference types="stripe/types/2020-08-27/BillingPortal/Sessions" />
/// <reference types="stripe/types/2020-08-27/BitcoinReceivers" />
/// <reference types="stripe/types/2020-08-27/BitcoinTransactions" />
/// <reference types="stripe/types/2020-08-27/Capabilities" />
/// <reference types="stripe/types/2020-08-27/Cards" />
/// <reference types="stripe/types/2020-08-27/CashBalances" />
/// <reference types="stripe/types/2020-08-27/Charges" />
/// <reference types="stripe/types/2020-08-27/Checkout/Sessions" />
/// <reference types="stripe/types/2020-08-27/ConnectCollectionTransfers" />
/// <reference types="stripe/types/2020-08-27/CountrySpecs" />
/// <reference types="stripe/types/2020-08-27/Coupons" />
/// <reference types="stripe/types/2020-08-27/CreditNoteLineItems" />
/// <reference types="stripe/types/2020-08-27/CreditNotes" />
/// <reference types="stripe/types/2020-08-27/CustomerBalanceTransactions" />
/// <reference types="stripe/types/2020-08-27/CustomerSources" />
/// <reference types="stripe/types/2020-08-27/Customers" />
/// <reference types="stripe/types/2020-08-27/Discounts" />
/// <reference types="stripe/types/2020-08-27/Disputes" />
/// <reference types="stripe/types/2020-08-27/EphemeralKeys" />
/// <reference types="stripe/types/2020-08-27/Events" />
/// <reference types="stripe/types/2020-08-27/ExchangeRates" />
/// <reference types="stripe/types/2020-08-27/ExternalAccounts" />
/// <reference types="stripe/types/2020-08-27/FeeRefunds" />
/// <reference types="stripe/types/2020-08-27/FileLinks" />
/// <reference types="stripe/types/2020-08-27/Files" />
/// <reference types="stripe/types/2020-08-27/FinancialConnections/AccountOwners" />
/// <reference types="stripe/types/2020-08-27/FinancialConnections/AccountOwnerships" />
/// <reference types="stripe/types/2020-08-27/FinancialConnections/Accounts" />
/// <reference types="stripe/types/2020-08-27/FinancialConnections/Sessions" />
/// <reference types="stripe/types/2020-08-27/FundingInstructions" />
/// <reference types="stripe/types/2020-08-27/Identity/VerificationReports" />
/// <reference types="stripe/types/2020-08-27/Identity/VerificationSessions" />
/// <reference types="stripe/types/2020-08-27/InvoiceItems" />
/// <reference types="stripe/types/2020-08-27/InvoiceLineItems" />
/// <reference types="stripe/types/2020-08-27/Invoices" />
/// <reference types="stripe/types/2020-08-27/IssuerFraudRecords" />
/// <reference types="stripe/types/2020-08-27/Issuing/Authorizations" />
/// <reference types="stripe/types/2020-08-27/Issuing/CardDetails" />
/// <reference types="stripe/types/2020-08-27/Issuing/Cardholders" />
/// <reference types="stripe/types/2020-08-27/Issuing/Cards" />
/// <reference types="stripe/types/2020-08-27/Issuing/Disputes" />
/// <reference types="stripe/types/2020-08-27/Issuing/Transactions" />
/// <reference types="stripe/types/2020-08-27/LineItems" />
/// <reference types="stripe/types/2020-08-27/LoginLinks" />
/// <reference types="stripe/types/2020-08-27/Mandates" />
/// <reference types="stripe/types/2020-08-27/Orders" />
/// <reference types="stripe/types/2020-08-27/PaymentIntents" />
/// <reference types="stripe/types/2020-08-27/PaymentLinks" />
/// <reference types="stripe/types/2020-08-27/PaymentMethods" />
/// <reference types="stripe/types/2020-08-27/Payouts" />
/// <reference types="stripe/types/2020-08-27/Persons" />
/// <reference types="stripe/types/2020-08-27/Plans" />
/// <reference types="stripe/types/2020-08-27/PlatformTaxFees" />
/// <reference types="stripe/types/2020-08-27/Prices" />
/// <reference types="stripe/types/2020-08-27/Products" />
/// <reference types="stripe/types/2020-08-27/PromotionCodes" />
/// <reference types="stripe/types/2020-08-27/Quotes" />
/// <reference types="stripe/types/2020-08-27/Radar/EarlyFraudWarnings" />
/// <reference types="stripe/types/2020-08-27/Radar/ValueListItems" />
/// <reference types="stripe/types/2020-08-27/Radar/ValueLists" />
/// <reference types="stripe/types/2020-08-27/Recipients" />
/// <reference types="stripe/types/2020-08-27/Refunds" />
/// <reference types="stripe/types/2020-08-27/Reporting/ReportRuns" />
/// <reference types="stripe/types/2020-08-27/Reporting/ReportTypes" />
/// <reference types="stripe/types/2020-08-27/ReserveTransactions" />
/// <reference types="stripe/types/2020-08-27/Reviews" />
/// <reference types="stripe/types/2020-08-27/SKUs" />
/// <reference types="stripe/types/2020-08-27/SetupAttempts" />
/// <reference types="stripe/types/2020-08-27/SetupIntents" />
/// <reference types="stripe/types/2020-08-27/ShippingRates" />
/// <reference types="stripe/types/2020-08-27/Sigma/ScheduledQueryRuns" />
/// <reference types="stripe/types/2020-08-27/SourceMandateNotifications" />
/// <reference types="stripe/types/2020-08-27/SourceTransactions" />
/// <reference types="stripe/types/2020-08-27/Sources" />
/// <reference types="stripe/types/2020-08-27/SubscriptionItems" />
/// <reference types="stripe/types/2020-08-27/SubscriptionSchedules" />
/// <reference types="stripe/types/2020-08-27/Subscriptions" />
/// <reference types="stripe/types/2020-08-27/TaxCodes" />
/// <reference types="stripe/types/2020-08-27/TaxDeductedAtSources" />
/// <reference types="stripe/types/2020-08-27/TaxIds" />
/// <reference types="stripe/types/2020-08-27/TaxRates" />
/// <reference types="stripe/types/2020-08-27/Terminal/Configurations" />
/// <reference types="stripe/types/2020-08-27/Terminal/ConnectionTokens" />
/// <reference types="stripe/types/2020-08-27/Terminal/Locations" />
/// <reference types="stripe/types/2020-08-27/Terminal/Readers" />
/// <reference types="stripe/types/2020-08-27/TestHelpers/Customers" />
/// <reference types="stripe/types/2020-08-27/TestHelpers/Issuing/Cards" />
/// <reference types="stripe/types/2020-08-27/TestHelpers/Refunds" />
/// <reference types="stripe/types/2020-08-27/TestHelpers/Terminal/Readers" />
/// <reference types="stripe/types/2020-08-27/TestHelpers/TestClocks" />
/// <reference types="stripe/types/2020-08-27/TestHelpers/Treasury/InboundTransfers" />
/// <reference types="stripe/types/2020-08-27/TestHelpers/Treasury/OutboundPayments" />
/// <reference types="stripe/types/2020-08-27/TestHelpers/Treasury/OutboundTransfers" />
/// <reference types="stripe/types/2020-08-27/TestHelpers/Treasury/ReceivedCredits" />
/// <reference types="stripe/types/2020-08-27/TestHelpers/Treasury/ReceivedDebits" />
/// <reference types="stripe/types/2020-08-27/Tokens" />
/// <reference types="stripe/types/2020-08-27/Topups" />
/// <reference types="stripe/types/2020-08-27/TransferReversals" />
/// <reference types="stripe/types/2020-08-27/Transfers" />
/// <reference types="stripe/types/2020-08-27/Treasury/CreditReversals" />
/// <reference types="stripe/types/2020-08-27/Treasury/DebitReversals" />
/// <reference types="stripe/types/2020-08-27/Treasury/FinancialAccountFeatures" />
/// <reference types="stripe/types/2020-08-27/Treasury/FinancialAccounts" />
/// <reference types="stripe/types/2020-08-27/Treasury/InboundTransfers" />
/// <reference types="stripe/types/2020-08-27/Treasury/OutboundPayments" />
/// <reference types="stripe/types/2020-08-27/Treasury/OutboundTransfers" />
/// <reference types="stripe/types/2020-08-27/Treasury/ReceivedCredits" />
/// <reference types="stripe/types/2020-08-27/Treasury/ReceivedDebits" />
/// <reference types="stripe/types/2020-08-27/Treasury/TransactionEntries" />
/// <reference types="stripe/types/2020-08-27/Treasury/Transactions" />
/// <reference types="stripe/types/2020-08-27/UsageRecordSummaries" />
/// <reference types="stripe/types/2020-08-27/UsageRecords" />
/// <reference types="stripe/types/2020-08-27/WebhookEndpoints" />
/// <reference types="stripe/types/lib" />
/// <reference types="stripe/types/net/net" />
import type * as account from './account';
import * as xe from '@edge/xe-utils';
import Stripe from 'stripe';
import { Key, PaginationParams, PeriodParams, RequestCallback, SearchResponse, Timestamps } from '.';
export interface AccountBalance {
    token: {
        date: string;
        usdPerXe: number;
    };
    address: string;
    wallet: BalanceInUsdAndXe;
    available: BalanceInUsdAndXe;
    reserved: BalanceInUsdAndXe;
    total: BalanceInUsdAndXe;
    credit: BalanceInUsdAndXe;
    threshold: {
        suspend: BalanceInUsdAndXe;
        warning: BalanceInUsdAndXe;
    };
    purchases: {
        pending: number;
    };
    consumption: {
        any: boolean;
        anyExcludingDNS: boolean;
        charges: {
            pending: number;
            pendingAmount: number;
        };
        invoices: {
            unpaid: number;
            unpaidAmount: number;
        };
    };
}
export interface BalanceInUsdAndXe {
    usd: number;
    xe: number;
}
export interface BillingCharge extends Key {
    /** Account key */
    account: string;
    /** Main entity ID */
    entity: string;
    /** Service detail */
    service: {
        /** Type of service chargeable */
        type: string;
        /** Amount of service used (unit depending on type) */
        used: number | Record<string, number>;
        /** Amount of service charged (unit depending on type) */
        charged: number | Record<string, number>;
        /** Additional records to describe/explain service charge */
        records?: string[];
    };
    /** Summary of service chargeable */
    summary: string;
    /** Charge amount (USD) */
    amount: number;
    /** Invoice period start time */
    start: number;
    /** Invoice period end time */
    end: number;
}
/** Invoice data. */
export interface Invoice extends Key, Timestamps {
    /** Account key */
    account: string;
    /** Payment key */
    payment?: string;
    /** Total amount invoiced (USD) */
    amount: number;
    /** USD-XE rate */
    rate: {
        date: string;
        value: number;
    };
    /**
     * Total amount invoiced (XE).
     * This is captured when the invoice is created based on the USD-XE rate captured in `rate`.
     */
    xeAmount: number;
    /**
     * Purchase relation.
     */
    purchase?: string | null;
    /**
     * Service items invoiced.
     * This may include multiple charges for the same entities, each of which includes the charge `_id`.
     * Although not displayed to the customer, it is retained for diagnostics and auditing purposes.
     * It is retained long-term even if the original charge data is evicted.
     */
    items: InvoiceItem[];
    /**
     * Summary of service items invoiced.
     * This is displayed to the customer and should only include one charge per entity.
     */
    displayItems: InvoiceDisplayItem[];
    /** Invoice payment status */
    status: 'hold' | 'paid' | 'unpaid';
    /** Invoice period start time */
    start: number;
    /** Invoice period end time */
    end: number;
}
export type InvoiceDisplayItem = Pick<InvoiceItem, 'entity' | 'summary' | 'amount'>;
export interface InvoiceItem extends Pick<BillingCharge, 'entity' | 'summary' | 'amount'>, Partial<Pick<BillingCharge, 'start' | 'end'>> {
    _id: string;
}
export interface Payment extends Key, Timestamps {
    /** Account key */
    account: string;
    /** Invoice key */
    invoice: string;
    /** Original USD amount */
    amount: number;
    /** USD-XE rate of the corresponding invoice. */
    rate: {
        date: string;
        value: number;
    };
    /** Payment status */
    status: 'confirmed' | 'hold' | 'pending' | 'processed' | 'unsent';
    /** Number of attempts to submit payment */
    attempts: number;
    /** Tip block height when XE transaction was last attempted */
    lastAttemptHeight?: number;
    /** Last response from XE blockchain */
    lastResponse?: string;
    /** XE transaction */
    tx: PaymentTransaction;
}
export interface PaymentMethod extends Key, Partial<StripePaymentMethod>, Timestamps {
    /** Account key */
    account: string;
    /** Payment method name */
    name: string;
    /** Status of payment method */
    status: 'invalid' | 'ok';
    /** Last error message if payment method invalidated */
    lastError?: string;
}
export type PaymentTransaction = Omit<xe.tx.Tx, 'hash'> & Partial<Pick<xe.tx.Tx, 'hash'>>;
export interface Purchase extends Key, Partial<StripePurchase>, Timestamps {
    /** Account key */
    account: string;
    /** Purchase amount and currency */
    send: {
        currency: string;
        amount: number;
    };
    /** {send.currency}-{receive.currency} rate when payment created */
    rate: {
        date: string;
        value: number;
    };
    /** Received amount and currency */
    receive: {
        currency: string;
        amount: number;
    };
    auto?: boolean;
    /** Purchase status */
    status: 'cancelled' | 'complete' | 'paid' | 'pending' | 'processed' | 'unpaid' | 'unsent';
    /** XE transaction */
    tx?: PurchaseTransaction;
    /** Number of attempts to submit XE transaction for purchase (after payment) */
    attempts?: number;
    /** Tip block height when XE transaction was last attempted */
    lastAttemptHeight?: number;
    /** Last response from XE blockchain */
    lastResponse?: string;
}
export type PurchaseTransaction = Omit<xe.tx.Tx, 'hash'> & Partial<Pick<xe.tx.Tx, 'hash'>>;
export interface StripePaymentMethod {
    stripe: Pick<Stripe.PaymentMethod, 'id' | 'customer'> & {
        card?: Pick<NonNullable<Stripe.PaymentMethod['card']>, 'brand' | 'exp_month' | 'exp_year' | 'last4'>;
    };
}
export interface StripePurchase {
    intent: Stripe.Response<Pick<Stripe.PaymentIntent, 'id' | 'client_secret' | 'customer' | 'status'>>;
}
export interface AddPaymentMethodRequest {
    account: string;
    name: string;
    stripe?: string;
}
export interface AddPaymentMethodResponse {
    paymentMethod: PaymentMethod;
    message: string;
}
export interface BeginStripePurchaseRequest {
    account: string;
    send: {
        amount: number;
        currency: string;
    };
    receive: {
        currency: string;
    };
}
export interface BeginStripePurchaseResponse {
    purchase: Purchase;
    message: string;
}
export interface CancelPurchaseResponse {
    purchase: Purchase;
    message: string;
}
export interface CreateStripeSetupIntentRequest {
    account: string;
}
export interface CreateStripeSetupIntentResponse {
    setup: Stripe.Response<Stripe.SetupIntent>;
    message: string;
}
export interface DeletePaymentMethodResponse {
    account: account.Account;
    paymentMethod: PaymentMethod;
    message: string;
}
export type GetAccountBalanceResponse = AccountBalance;
export interface GetBillingChargesParams extends PaginationParams, PeriodParams {
    key?: string | string[];
    account?: string | string[];
    entity?: string | string[];
    serviceType?: string | string[];
}
export interface GetInvoiceResponse {
    invoice: Invoice;
}
export interface GetInvoicesParams extends PaginationParams, PeriodParams {
    key?: string | string[];
    account?: string | string[];
    status?: string | string[];
    search?: string;
}
export interface GetPaymentMethodResponse {
    paymentMethod: PaymentMethod;
}
export interface GetPaymentMethodsParams extends PaginationParams, PeriodParams {
    key?: string | string[];
    account?: string | string[];
    status?: string | string[];
}
export interface GetPaymentsParams extends PaginationParams, PeriodParams {
    key?: string | string[];
    account?: string | string[];
    invoice?: string | string[];
    status?: string | string[];
}
export interface GetPaymentResponse {
    payment: Payment;
}
export interface GetPurchaseResponse {
    purchase: Purchase;
}
export interface GetPurchasesParams extends PaginationParams, PeriodParams {
    key?: string | string[];
    account?: string | string[];
    auto?: boolean;
    status?: string | string[];
}
export interface RefreshPurchaseResponse {
    purchase: Purchase;
    /** Omitted if no action was taken */
    message?: string;
}
export interface RemoveDefaultPaymentMethodRequest {
    account: string;
}
export interface RemoveDefaultPaymentMethodResponse {
    account: account.Account;
    message: string;
}
export interface SetDefaultPaymentMethodRequest {
    account: string;
    paymentMethod: string;
}
export interface SetDefaultPaymentMethodResponse {
    account: account.Account;
    paymentMethod: PaymentMethod;
    message: string;
}
export interface UnholdInvoiceResponse {
    invoice: Invoice;
    payment?: Payment;
}
export declare function addPaymentMethod(host: string, token: string, data: AddPaymentMethodRequest, cb?: RequestCallback): Promise<AddPaymentMethodResponse>;
export declare function beginStripePurchase(host: string, token: string, data: BeginStripePurchaseRequest, cb?: RequestCallback): Promise<BeginStripePurchaseResponse>;
export declare function cancelPurchase(host: string, token: string, key: string, cb?: RequestCallback): Promise<CancelPurchaseResponse>;
export declare function createStripeSetupIntent(host: string, token: string, data: CreateStripeSetupIntentRequest, cb?: RequestCallback): Promise<CreateStripeSetupIntentResponse>;
export declare function deletePaymentMethod(host: string, token: string, key: string, cb?: RequestCallback): Promise<DeletePaymentMethodResponse>;
/**
 * Download an invoice PDF.
 * In this form, the PDF data blob will be returned to the caller.
 */
export declare function downloadInvoice(host: string, token: string, key: string, cb?: RequestCallback): Promise<Blob>;
/**
 * Download an invoice PDF.
 * When a `filename` string is provided, this function attempts to download the PDF using a DOM workaround instead
 * of returning the PDF data blob to the caller.
 * This will only work correctly in a web browser.
 */
export declare function downloadInvoice(host: string, token: string, key: string, filename: string, cb?: RequestCallback): Promise<void>;
export declare function getAccountBalance(host: string, token: string, cb?: RequestCallback): Promise<GetAccountBalanceResponse>;
export declare function getBillingCharges(host: string, token: string, params?: GetBillingChargesParams, cb?: RequestCallback): Promise<SearchResponse<BillingCharge>>;
export declare function getInvoice(host: string, token: string, key: string, cb?: RequestCallback): Promise<GetInvoiceResponse>;
export declare function getInvoices(host: string, token: string, params?: GetInvoicesParams, cb?: RequestCallback): Promise<SearchResponse<Invoice>>;
export declare function getPayment(host: string, token: string, key: string, cb?: RequestCallback): Promise<GetPaymentResponse>;
export declare function getPaymentMethod(host: string, token: string, key: string, cb?: RequestCallback): Promise<GetPaymentMethodResponse>;
export declare function getPaymentMethods(host: string, token: string, params?: GetPaymentMethodsParams, cb?: RequestCallback): Promise<SearchResponse<PaymentMethod>>;
export declare function getPayments(host: string, token: string, params?: GetPaymentsParams, cb?: RequestCallback): Promise<SearchResponse<Payment>>;
export declare function getPurchase(host: string, token: string, key: string, cb?: RequestCallback): Promise<GetPurchaseResponse>;
export declare function getPurchases(host: string, token: string, params?: GetPurchasesParams, cb?: RequestCallback): Promise<SearchResponse<Purchase>>;
export declare function refreshPurchase(host: string, token: string, key: string, cb?: RequestCallback): Promise<RefreshPurchaseResponse>;
export declare function removeDefaultPaymentMethod(host: string, token: string, data: RemoveDefaultPaymentMethodRequest, cb?: RequestCallback): Promise<RemoveDefaultPaymentMethodResponse>;
export declare function setDefaultPaymentMethod(host: string, token: string, data: SetDefaultPaymentMethodRequest, cb?: RequestCallback): Promise<SetDefaultPaymentMethodResponse>;
export declare function unholdInvoice(host: string, token: string, key: string, cb?: RequestCallback): Promise<UnholdInvoiceResponse>;
